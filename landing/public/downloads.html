<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Download Recogniz.ing</title>
    <link rel="icon" type="image/svg+xml" href="/assets/icons/app_icon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Custom styles to match landing page */
      .section-padding {
        @apply px-6 lg:px-8;
      }

      .container-custom {
        @apply max-w-6xl mx-auto;
      }

      .font-display {
        font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      /* Animation */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .animate-fade-in {
        animation: fadeIn 0.8s ease-out;
      }

      /* Download card hover effect */
      .download-card {
        @apply bg-white p-8 rounded-2xl border border-slate-200 hover:border-slate-300 transition-all duration-300;
      }

      .download-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      }

      /* Download button styling */
      .download-button {
        @apply inline-flex items-center justify-center px-6 py-3 bg-primary-600 text-white rounded-xl font-medium;
        transition: all 0.2s ease;
        text-decoration: none !important;
      }

      .download-button:hover {
        @apply bg-primary-700;
        transform: scale(1.05);
        box-shadow: 0 10px 20px rgba(14, 165, 233, 0.3);
      }

      /* Loading state */
      .loading-dot {
        @apply inline-block w-2 h-2 bg-slate-400 rounded-full mx-1;
        animation: loading 1.4s infinite ease-in-out both;
      }

      .loading-dot:nth-child(1) { animation-delay: -0.32s; }
      .loading-dot:nth-child(2) { animation-delay: -0.16s; }

      @keyframes loading {
        0%, 80%, 100% {
          transform: scale(0);
        }
        40% {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body class="font-display bg-white">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white/80 backdrop-blur-xl z-50 border-b border-slate-100">
      <div class="container-custom px-6 py-4">
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-3">
            <svg class="w-8 h-8" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#0EA5E9"/>
                  <stop offset="50%" stop-color="#0284C7"/>
                  <stop offset="100%" stop-color="#0369A1"/>
                </linearGradient>
                <linearGradient id="innerGlow" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" stop-color="rgba(255,255,255,0.15)"/>
                  <stop offset="100%" stop-color="rgba(0,0,0,0.1)"/>
                </linearGradient>
                <linearGradient id="iconGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" stop-color="#FFFFFF"/>
                  <stop offset="100%" stop-color="#E0F2FE"/>
                </linearGradient>
              </defs>
              <rect width="1024" height="1024" rx="224" fill="url(#bgGradient)"/>
              <rect width="1024" height="1024" rx="224" fill="url(#innerGlow)"/>
              <g transform="translate(512, 512)">
                <path d="M -280 -120 A 180 180 0 0 0 -280 120" stroke="url(#iconGradient)" stroke-width="44" fill="none" stroke-linecap="round" opacity="0.5"/>
                <path d="M -200 -80 A 120 120 0 0 0 -200 80" stroke="url(#iconGradient)" stroke-width="44" fill="none" stroke-linecap="round" opacity="0.75"/>
                <path d="M -120 -40 A 60 60 0 0 0 -120 40" stroke="url(#iconGradient)" stroke-width="44" fill="none" stroke-linecap="round"/>
                <circle cx="-40" cy="0" r="32" fill="url(#iconGradient)"/>
                <rect x="40" y="-100" width="240" height="36" rx="18" fill="url(#iconGradient)"/>
                <rect x="40" y="-18" width="200" height="36" rx="18" fill="url(#iconGradient)" opacity="0.85"/>
                <rect x="40" y="64" width="160" height="36" rx="18" fill="url(#iconGradient)" opacity="0.7"/>
              </g>
            </svg>
            <span class="text-2xl font-display font-light tracking-tight text-slate-900">Recogniz.ing</span>
          </div>
          <a href="/" class="text-slate-700 hover:text-slate-900 font-medium transition-colors">
            ‚Üê Back to Home
          </a>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-32 pb-24 section-padding">
      <div class="container-custom">
        <!-- Title Section -->
        <div class="text-center max-w-4xl mx-auto mb-16">
          <h1 class="text-5xl sm:text-6xl lg:text-7xl font-light leading-tight mb-6 tracking-tight">
            Download
            <span class="block text-primary-600">Recogniz.ing</span>
          </h1>
          <p class="text-xl text-slate-600">Available on all platforms. Always free.</p>
        </div>

        <!-- Loading State -->
        <div id="loading" class="max-w-4xl mx-auto text-center py-20">
          <div class="flex justify-center items-center space-x-1 mb-4">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
          </div>
          <p class="text-slate-600">Loading download options...</p>
        </div>

        <!-- Download Cards -->
        <div id="downloads" class="max-w-4xl mx-auto" style="display: none;">
          <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Cards will be populated by JavaScript -->
          </div>
        </div>

        <!-- Error State -->
        <div id="error" class="max-w-4xl mx-auto text-center py-20" style="display: none;">
          <div class="mb-8">
            <svg class="w-16 h-16 mx-auto text-slate-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"/>
            </svg>
            <h2 class="text-2xl font-light text-slate-900 mb-2">Unable to load downloads</h2>
            <p class="text-slate-600 mb-6">Please check back later or create a GitHub release to enable downloads.</p>
            <a href="https://github.com/xicv/recogniz.ing/releases" target="_blank" class="inline-flex items-center px-6 py-3 bg-primary-600 text-white rounded-xl hover:bg-primary-700 transition-colors">
              View on GitHub
              <svg class="w-4 h-4 ml-2" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 6v2l5 5-5 5v-2a8 8 0 110-10z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </main>

    <script>
      // GitHub API configuration
      const GITHUB_API = 'https://api.github.com';
      const REPO = 'xicv/recogniz.ing';

      // Platform configurations with exact icons from landing page
      const platforms = {
        macos: {
          name: 'macOS',
          icon: '<svg class="w-12 h-12 mx-auto mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.7 19.5c-.8 1.2-1.7 2.5-3 2.5-1.3 0-1.8-.8-3.3-.8-1.5 0-2 .8-3.3.8-1.3 0-2.3-1.3-3.1-2.5C4.2 17 2.9 12.5 4.7 9.4c.9-1.5 2.4-2.5 4.1-2.5 1.3 0 2.5.9 3.3.9.8 0 2.3-1.1 3.8-.9.6.03 2.5.3 3.6 2-.1.06-2.2 1.3-2.1 3.8.03 3 2.6 4 2.7 4-.03.07-.4 1.4-1.4 2.8M13 3.5c.7-.8 1.9-1.5 2.9-1.5.1 1.2-.3 2.4-1 3.2-.7.8-1.8 1.5-2.9 1.4-.1-1.1.4-2.4 1.1-3.1z" fill="#000"/></svg>',
          status: '10.15+'
        },
        windows: {
          name: 'Windows',
          icon: '<svg class="w-12 h-12 mx-auto mb-4" viewBox="0 0 24 24" fill="#000" xmlns="http://www.w3.org/2000/svg"><path d="M3,12V6.75L9,5.43v6.48L3,12M20,3v8.75L10,11.9V5.21L20,3M3,13l6,.09V19.9L3,18.75V13m17,.25V22L10,20.09v-7Z"/></svg>',
          status: '10+'
        },
        linux: {
          name: 'Linux',
          icon: '<svg class="w-12 h-12 mx-auto mb-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 2c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8zm0 2c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 5h2v6h-2V7z" fill="#000"/></svg>',
          status: 'Ubuntu 18.04+'
        },
        mobile: {
          name: 'Mobile',
          icon: '<svg class="w-12 h-12 mx-auto mb-4" viewBox="0 0 24 24" fill="#0F1729" xmlns="http://www.w3.org/2000/svg"><path d="M13 19C13 19.5523 12.5523 20 12 20C11.4477 20 11 19.5523 11 19C11 18.4477 11.4477 18 12 18C12.5523 18 13 18.4477 13 19Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.23417 1L9.28281 1.00001C9.2904 1 9.298 1 9.30559 1.00001H14.6944C14.702 1 14.7096 1 14.7172 1.00001L14.7658 1C14.7898 1 14.813 0.999997 14.8357 1.00001H15C15.0164 1.00001 15.0327 1.0004 15.0489 1.00118C15.1351 1.00243 15.2118 1.00496 15.2841 1.01011C17.2693 1.15145 18.8486 2.73075 18.9899 4.71593C19.0001 4.85862 19 5.01839 19 5.23416L19 17.212C19 18.0305 19 18.7061 18.9544 19.2561C18.9069 19.8274 18.805 20.3523 18.5497 20.8439C18.1702 21.5745 17.5745 22.1702 16.8439 22.5497C16.3523 22.805 15.8274 22.9069 15.2561 22.9544C14.7061 23 14.0306 23 13.2121 23H10.7879C9.96946 23 9.29391 23 8.74394 22.9544C8.17259 22.9069 7.64775 22.805 7.15611 22.5497C6.42554 22.1702 5.82986 21.5745 5.45035 20.8439C5.19497 20.3523 5.09311 19.8274 5.04566 19.2561C4.99998 18.7061 4.99999 18.0305 5.00001 17.212L5 5.23417C4.99997 5.0184 4.99995 4.85862 5.01011 4.71593C5.15145 2.73075 6.73075 1.15145 8.71593 1.01011C8.78824 1.00496 8.86493 1.00243 8.95107 1.00118C8.96729 1.0004 8.9836 1.00001 9.00001 1.00001H9.16434C9.18696 0.999997 9.21023 1 9.23417 1ZM9.27151 3.00001C9.00219 3.00001 8.91996 3.00064 8.85797 3.00506C7.86538 3.07573 7.07573 3.86538 7.00506 4.85797C7.00064 4.91996 7.00001 5.00219 7.00001 5.27151V17.17C7.00001 18.041 7.00081 18.6331 7.0388 19.0906C7.07579 19.536 7.1428 19.7634 7.22518 19.922C7.41493 20.2872 7.71277 20.5851 8.07806 20.7748C8.23664 20.8572 8.46402 20.9242 8.90946 20.9612C9.36687 20.9992 9.95899 21 10.83 21H13.17C14.041 21 14.6331 20.9992 15.0906 20.9612C15.536 20.9242 15.7634 20.8572 15.922 20.7748C16.2872 20.5851 16.5851 20.2872 16.7748 19.922C16.8572 19.7634 16.9242 19.536 16.9612 19.0906C16.9992 18.6331 17 18.041 17 17.17V5.27151C17 5.00219 16.9994 4.91996 16.995 4.85797C16.9243 3.86538 16.1346 3.07573 15.142 3.00506C15.0801 3.00064 14.9978 3.00001 14.7285 3.00001C14.6616 3.00001 14.6541 3.00017 14.6491 3.00037C14.5206 3.00524 14.3989 3.05943 14.3094 3.15168C14.3058 3.1553 14.3007 3.16075 14.256 3.21046L13.7673 3.75343L13.7548 3.76722C13.7489 3.77362 13.7374 3.78609 13.7227 3.80087C13.6914 3.83231 13.6352 3.88538 13.5553 3.93802C13.4595 4.00108 13.3541 4.04803 13.2432 4.07701C13.1506 4.1012 13.0735 4.10751 13.0293 4.1097C13.0084 4.11073 12.9914 4.11096 12.9828 4.11104L12.9642 4.11112H11.0359L11.0172 4.11104C11.0086 4.11096 10.9916 4.11073 10.9708 4.1097C10.9265 4.10751 10.8494 4.1012 10.7568 4.07701C10.6459 4.04803 10.5405 4.00108 10.4447 3.93802C10.3648 3.88538 10.3086 3.83231 10.2773 3.80087C10.2627 3.78609 10.2511 3.77362 10.2452 3.76722L10.2327 3.75343L9.74405 3.21046C9.69932 3.16075 9.69418 3.1553 9.69066 3.15168C9.60108 3.05943 9.47941 3.00524 9.35092 3.00037C9.34587 3.00017 9.33838 3.00001 9.27151 3.00001Z"/></svg>',
          status: 'iOS & Android'
        }
      };

      // Fetch release data from GitHub API
      async function fetchReleaseData() {
        try {
          const response = await fetch(`${GITHUB_API}/repos/${REPO}/releases/latest`);
          if (!response.ok) {
            throw new Error('Failed to fetch release data');
          }
          return await response.json();
        } catch (error) {
          console.error('Error fetching release:', error);
          return null;
        }
      }

      // Get download URL for a platform
      function getDownloadUrl(platform, releaseData) {
        if (!releaseData || !releaseData.assets) {
          return null;
        }

        const asset = releaseData.assets.find(asset =>
          asset.name.toLowerCase().includes(platform.toLowerCase()) ||
          (platform === 'mobile' && (asset.name.toLowerCase().includes('ios') || asset.name.toLowerCase().includes('android')))
        );

        return asset ? asset.browser_download_url : null;
      }

      // Render download cards
      function renderDownloads(releaseData) {
        const container = document.getElementById('downloads');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');

        loading.style.display = 'none';
        error.style.display = 'none';

        // Create download grid
        const grid = document.createElement('div');
        grid.className = 'grid sm:grid-cols-2 lg:grid-cols-4 gap-6';

        Object.entries(platforms).forEach(([key, platform]) => {
          const downloadUrl = getDownloadUrl(key, releaseData);
          const isAvailable = !!downloadUrl || key === 'macos'; // macOS is available now

          const card = document.createElement('div');
          card.className = 'download-card';

          if (isAvailable && downloadUrl) {
            card.innerHTML = `
              <a href="${downloadUrl}" class="block group">
                ${platform.icon}
                <h3 class="font-medium mb-1">${platform.name}</h3>
                <p class="text-sm text-slate-500 mb-4">${platform.status}</p>
                <div class="download-button">
                  Download
                  <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                  </svg>
                </div>
              </a>
            `;
          } else {
            // Coming soon for other platforms
            card.innerHTML = `
              ${platform.icon}
              <h3 class="font-medium mb-1">${platform.name}</h3>
              <p class="text-sm text-slate-500">${platform.status}</p>
              <div class="mt-4">
                <span class="inline-flex items-center text-slate-400">
                  Coming Soon
                </span>
              </div>
            `;
          }

          grid.appendChild(card);
        });

        container.appendChild(grid);
        container.style.display = 'block';
      }

      // Render error state
      function renderError() {
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');

        loading.style.display = 'none';
        error.style.display = 'block';
      }

      // Track download event
      function trackDownload(platform) {
        console.log(`Download initiated for: ${platform}`);
        // You can add analytics here
      }

      // Initialize
      document.addEventListener('DOMContentLoaded', async () => {
        const releaseData = await fetchReleaseData();

        if (releaseData) {
          renderDownloads(releaseData);
        } else {
          renderError();
        }
      });
    </script>
  </body>
</html>