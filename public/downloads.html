<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Download Recogniz.ing</title>
    <link rel="icon" type="image/svg+xml" href="/assets/icons/app_icon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Poppins', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        background: white;
        min-height: 100vh;
      }

      /* Navigation */
      .navbar {
        position: fixed;
        top: 0;
        width: 100%;
        background: white/80;
        backdrop-filter: xl;
        z-index: 50;
        border-bottom: 1px solid #f1f5f9;
      }

      .navbar-content {
        max-width: 80rem;
        margin: 0 auto;
        padding: 16px 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .logo-container {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo {
        width: 32px;
        height: 32px;
      }

      .back-link {
        color: #64748b;
        text-decoration: none;
        font-size: 14px;
        font-weight: 500;
        transition: color 0.2s;
      }

      .back-link:hover {
        color: #475569;
      }

      /* Main Content */
      .main-content {
        padding-top: 80px;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .download-container {
        max-width: 1200px;
        width: 100%;
        padding: 0 24px;
      }

      .title {
        text-align: center;
        margin-bottom: 48px;
      }

      .title h1 {
        font-size: 48px;
        font-weight: 800;
        background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 16px;
      }

      .title p {
        font-size: 18px;
        color: #64748b;
        font-weight: 400;
      }

      /* Download Cards */
      .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
        margin-bottom: 48px;
      }

      .card {
        background: #fafafa;
        border: 1px solid #e2e8f0;
        border-radius: 16px;
        padding: 32px;
        text-align: center;
        transition: all 0.2s;
      }

      .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px rgba(0,0,0,0.1);
      }

      .platform-icon {
        width: 64px;
        height: 64px;
        margin: 0 auto 16px;
      }

      .platform-name {
        font-size: 20px;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 8px;
      }

      .platform-status {
        font-size: 14px;
        color: #64748b;
        margin-bottom: 24px;
      }

      .download-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 24px;
        background: #0ea5e9;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 500;
        transition: all 0.2s;
        width: 100%;
        justify-content: center;
      }

      .download-btn:hover {
        background: #0284c7;
        transform: scale(1.02);
      }

      .download-btn:disabled {
        background: #cbd5e1;
        cursor: not-allowed;
        transform: none;
      }

      /* System Requirements */
      .requirements {
        background: #f8fafc;
        border-radius: 16px;
        padding: 32px;
        margin-top: 48px;
      }

      .requirements h2 {
        font-size: 24px;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 16px;
      }

      .requirements ul {
        list-style: none;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 12px;
      }

      .requirements li {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #475569;
      }

      .requirements li::before {
        content: "✓";
        color: #10b981;
        font-weight: bold;
      }

      /* Loading State */
      .loading {
        text-align: center;
        padding: 48px;
        color: #64748b;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .title h1 {
          font-size: 32px;
        }

        .title p {
          font-size: 16px;
        }

        .cards-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="navbar-content">
        <div class="logo-container">
          <svg class="logo" viewBox="0 0 1024 1024" fill="none" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#0EA5E9"/>
                <stop offset="50%" stop-color="#0284C7"/>
                <stop offset="100%" stop-color="#0369A1"/>
              </linearGradient>
            </defs>
            <rect width="1024" height="1024" rx="192" fill="url(#bgGradient)"/>
            <g transform="translate(102, 102)">
              <rect x="40" y="40" width="740" height="740" rx="80" fill="white" fill-opacity="0.1"/>
              <g transform="translate(150, 250)">
                <rect x="0" y="0" width="520" height="60" rx="30" fill="white" fill-opacity="0.9"/>
                <rect x="0" y="100" width="420" height="60" rx="30" fill="white" fill-opacity="0.9"/>
                <rect x="0" y="200" width="460" height="60" rx="30" fill="white" fill-opacity="0.9"/>
                <circle cx="460" cy="30" r="20" fill="#10B981"/>
                <circle cx="360" cy="130" r="20" fill="#10B981"/>
                <circle cx="420" cy="230" r="20" fill="#10B981"/>
              </g>
              <g transform="translate(380, 420)">
                <circle cx="130" cy="130" r="60" fill="white" fill-opacity="0.9"/>
                <path d="M 110 120 L 130 140 L 150 110" stroke="#0369A1" stroke-width="12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
              </g>
            </g>
          </svg>
          <span style="font-weight: 700; font-size: 20px; color: #1e293b;">Recogniz.ing</span>
        </div>
        <a href="/" class="back-link">← Back to Home</a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <div class="download-container">
        <div class="title">
          <h1>Download Recogniz.ing</h1>
          <p>Choose your platform below to get started</p>
        </div>

        <div id="loading" class="loading">
          <p>Loading download options...</p>
        </div>

        <div id="downloads" class="cards-grid" style="display: none;">
          <!-- Cards will be populated by JavaScript -->
        </div>

        <!-- System Requirements -->
        <div class="requirements">
          <h2>System Requirements</h2>
          <ul>
            <li>Gemini API key (free at <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #0ea5e9;">Google AI Studio</a>)</li>
            <li>Microphone access for voice recording</li>
            <li>Internet connection for AI transcription</li>
            <li>Minimum 4GB RAM recommended</li>
            <li>100MB free disk space</li>
          </ul>
        </div>
      </div>
    </main>

    <script>
      // GitHub API configuration
      const GITHUB_API = 'https://api.github.com';
      const REPO = 'xicv/recogniz.ing';

      // Platform configurations
      const platforms = {
        macos: {
          name: 'macOS',
          icon: '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z" fill="currentColor"/></svg>',
          status: 'macOS 10.15 or later'
        },
        windows: {
          name: 'Windows',
          icon: '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801" fill="#0078D4"/></svg>',
          status: 'Windows 10 or later'
        },
        linux: {
          name: 'Linux',
          icon: '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.4c1.985 0 3.6 1.615 3.6 3.6s-1.615 3.6-3.6 3.6S8.4 7.985 8.4 6s1.615-3.6 3.6-3.6zm0 16.8c-2.4 0-4.8-.972-6.516-2.688a9.543 9.543 0 0 1 2.736-6.324A3.576 3.576 0 0 0 12 10.8c1.385 0 2.602.787 3.204 1.944a9.543 9.543 0 0 1 2.312 6.324A9.174 9.174 0 0 1 12 19.2z" fill="currentColor"/></svg>',
          status: 'Ubuntu 18.04 or later'
        },
        android: {
          name: 'Android',
          icon: '<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.6 9.48l1.84-3.18c.16-.31.04-.69-.26-.85-.29-.15-.65-.06-.83.22l-1.88 3.24c-2.86-1.21-6.08-1.21-8.94 0L5.65 5.67c-.19-.29-.54-.38-.83-.22-.3.16-.42.54-.26.85l1.84 3.18C2.78 11.18 0 15.39 0 20.24h24c0-4.85-2.78-9.06-6.4-10.76zM7 18.24c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm10 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" fill="currentColor"/></svg>',
          status: 'Android 7.0 or later'
        }
      };

      // Fetch release data from GitHub API
      async function fetchReleaseData() {
        try {
          const response = await fetch(`${GITHUB_API}/repos/${REPO}/releases/latest`);
          if (!response.ok) {
            throw new Error('Failed to fetch release data');
          }
          return await response.json();
        } catch (error) {
          console.error('Error fetching release:', error);
          return null;
        }
      }

      // Get download URL for a platform
      function getDownloadUrl(platform, releaseData) {
        if (!releaseData || !releaseData.assets) {
          return null;
        }

        const asset = releaseData.assets.find(asset =>
          asset.name.toLowerCase().includes(platform.toLowerCase())
        );

        return asset ? asset.browser_download_url : null;
      }

      // Render download cards
      function renderDownloads(releaseData) {
        const container = document.getElementById('downloads');
        const loading = document.getElementById('loading');

        loading.style.display = 'none';
        container.style.display = 'grid';

        Object.entries(platforms).forEach(([key, platform]) => {
          const downloadUrl = getDownloadUrl(key, releaseData);
          const isAvailable = !!downloadUrl;

          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="platform-icon">${platform.icon}</div>
            <h3 class="platform-name">${platform.name}</h3>
            <p class="platform-status">${platform.status}</p>
            ${isAvailable
              ? `<a href="${downloadUrl}" class="download-btn" onclick="trackDownload('${key}')">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 15.5l-5-5h3V2h4v8.5h3l-5 5z" fill="currentColor"/>
                    <path d="M23 18v3H1v-3h22z" fill="currentColor"/>
                  </svg>
                  Download
                </a>`
              : `<button class="download-btn" disabled>
                  Coming Soon
                </button>`
            }
          `;

          container.appendChild(card);
        });
      }

      // Track download event
      function trackDownload(platform) {
        // You can add analytics here
        console.log(`Download initiated for: ${platform}`);
      }

      // Initialize
      document.addEventListener('DOMContentLoaded', async () => {
        const releaseData = await fetchReleaseData();
        renderDownloads(releaseData);
      });
    </script>
  </body>
</html>